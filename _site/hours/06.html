<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Что почем - крипта и все остальное</title>
    <link rel="stylesheet" href="/assets/styles.css">
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          function redirectToNextHour() {
              const now = new Date();
              const currentHour = now.getHours();
              const nextHour = (currentHour + 1) % 24;

              // Рассчитаем оставшиеся миллисекунды до следующего часа
              const timeToNextHour = (60 - now.getMinutes()) * 60 * 1000 - now.getSeconds() * 1000;

              // Проверим, совпадает ли текущий час страницы с часом в URL
              const pageHour = parseInt("06:00", 10);
              if (pageHour !== currentHour) {
                  window.location.href = `/hours/${currentHour.toString().padStart(2, '0')}`;
                  return;
              }

              // Установим таймер для перенаправления на следующий час
              setTimeout(function() {
                  window.location.href = `/hours/${nextHour.toString().padStart(2, '0')}`;
              }, timeToNextHour);
          }

          redirectToNextHour();
      });
  </script>

    <script>
  document.addEventListener("DOMContentLoaded", () => {
      const audioPlayer = document.getElementById("audio-player");
      const playPauseBtn = document.getElementById("play-pause-btn");
      const progressBar = document.querySelector(".progress-bar");
      const currentTimeDisplay = document.getElementById("current-time");
      const durationDisplay = document.getElementById("duration");

      const permalink = "/hours/06";
      const source = audioPlayer.querySelector("source");
      source.src = `/assets/audio${permalink}.mp3`;
      audioPlayer.load();

      let autoPlayDisabled = true;
      let isUserInteraction = false;

      // Устанавливаем начальное время воспроизведения и обновляем прогресс-бар
      audioPlayer.addEventListener("loadedmetadata", () => {
          const currentMinute = new Date().getMinutes();
          const currentSecond = new Date().getSeconds();

          if (currentMinute === 0 && currentSecond < 10) {
              // Начало часа — воспроизводим с начала
              audioPlayer.currentTime = 0;
          } else {
              // Воспроизводим с текущей минуты
              audioPlayer.currentTime = currentMinute * 60;
          }

          // Обновляем прогресс-бар и отображение времени
          updateProgressBar();
          durationDisplay.textContent = formatTime(audioPlayer.duration);

          // Попытка автозапуска
          attemptAutoPlay();
      });

      // Попытка автозапуска
      function attemptAutoPlay() {
          audioPlayer.play().then(() => {
              console.log("Автозапуск успешно выполнен");
              playPauseBtn.classList.remove("paused");
              playPauseBtn.classList.add("playing");
              autoPlayDisabled = false;
          }).catch(error => {
              console.error("Автозапуск блокирован:", error);
              autoPlayDisabled = true;
              // Попробуем снова при взаимодействии с пользователем
              enableAutoPlayOnInteraction();
          });
      }

      // Включаем автозапуск при взаимодействии пользователя
      function enableAutoPlayOnInteraction() {
          const interactionHandler = () => {
              if (autoPlayDisabled) {
                  attemptAutoPlay();
              }
              document.removeEventListener("click", interactionHandler);
              document.removeEventListener("keydown", interactionHandler);
              document.removeEventListener("mousemove", interactionHandler);
              document.removeEventListener("scroll", interactionHandler);
          };

          document.addEventListener("click", interactionHandler);
          document.addEventListener("keydown", interactionHandler);
          document.addEventListener("mousemove", interactionHandler);
          document.addEventListener("scroll", interactionHandler);
      }

      // Функция переключения воспроизведения
      function togglePlayPause() {
          if (audioPlayer.paused) {
              audioPlayer.play().then(() => {
                  playPauseBtn.classList.remove("paused");
                  playPauseBtn.classList.add("playing");
              }).catch(error => {
                  console.error("Не удалось воспроизвести:", error);
              });
          } else {
              audioPlayer.pause();
              playPauseBtn.classList.remove("playing");
              playPauseBtn.classList.add("paused");
          }
      }

      // Обработчики событий
      playPauseBtn.addEventListener("click", () => {
          isUserInteraction = true;
          togglePlayPause();
      });

      document.addEventListener("keydown", (event) => {
          if (event.code === "Space") {
              event.preventDefault();
              isUserInteraction = true;
              togglePlayPause();
          }
      });

      // Обновление прогресс-бара
      function updateProgressBar() {
          if (audioPlayer.duration) {
              const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
              progressBar.style.width = `${progressPercent}%`;
              currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);
          }
      }

      // Обновляем прогресс-бар сразу после установки currentTime
      audioPlayer.addEventListener("loadedmetadata", updateProgressBar);

      // Обновляем прогресс-бар при изменении времени
      audioPlayer.addEventListener("timeupdate", updateProgressBar);

      // Форматирование времени
      function formatTime(seconds) {
          const mins = Math.floor(seconds / 60);
          const secs = Math.floor(seconds % 60);
          return `${mins}:${secs < 10 ? '0' + secs : secs}`;
      }
  });
</script>

    <script>
// Функция для обновления времени
function updateTime() {
    const footerTimeWrapper = document.getElementById('footer-time-wrapper');
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');

    // Добавляем кружок перед временем
    footerTimeWrapper.innerHTML = `<span class="lime-circle">●</span> ${hours}:${minutes}:${seconds}`;
}

// Обновляем время каждую секунду
setInterval(updateTime, 1000);
updateTime(); // Начальный запуск для отображения времени сразу
</script>

</head>
<body>
  <main>
    <div class="main-content">
      <h1>Что почем - крипта и все остальное</h1>
      <br>
      <style>
/* Контейнер для текста с анимацией */
.marquee-container {
  width: 100%; /* Контейнер на всю ширину */
  overflow: hidden; /* Скрывает часть текста, выходящую за пределы */
  white-space: nowrap; /* Запрещает перенос строк */
}

.marquee-text {
  display: inline-block;
  padding-left: 100%; /* Начало текста с правой стороны */
  animation: marquee 400s linear infinite; /* Задаём анимацию с определённой длительностью */
}

/* Анимация прокрутки */
@keyframes marquee {
  0% {
    transform: translateX(100%); /* Начинаем с правой стороны */
  }
  100% {
    transform: translateX(-100%); /* Двигаем текст до полной левой стороны */
  }
}
</style>

<p>
  <div class="marquee-container">
    <div class="marquee-text">
      <style>
/* Стили для расписания */
.schedule-row {
  display: flex; /* Используем Flexbox для расположения элементов в строку */
  flex-wrap: nowrap; /* Запрещаем перенос элементов на новую строку */
  gap: 10px; /* Отступ между элементами */
  align-items: center; /* Выравнивание элементов по вертикали */
}

.schedule-item {
  display: flex;
  gap: 5px; /* Отступ между частями элемента */
}

.highlight-time {
  background-color: black;
  color: silver;
  border-radius: 4px;
  padding: 0 4px;
}

.highlight-section {
  background-color: green;
  color: lime;
  border-radius: 4px;
  padding: 0 4px;
}

.highlight-location {
  background-color: yellow;
  color: black;
  border-radius: 4px;
  padding: 0 4px;
}
</style>

<div class="schedule">
  <div class="schedule-row">
    
      
        <div class="schedule-item">
          <span class="highlight-time">00:00</span>
          <span class="highlight-section">Час быка</span>
          <span class="highlight-location">Москва</span>
          Полуночное шоу
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">01:00</span>
          <span class="highlight-section">Час быка</span>
          <span class="highlight-location">Москва</span>
          Программа про космос
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">02:00</span>
          <span class="highlight-section">АСМР</span>
          <span class="highlight-location">Ереван</span>
          АСМР-продолжение
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">03:00</span>
          <span class="highlight-section">Час быка</span>
          <span class="highlight-location">Москва</span>
          В гостях редакции Эфира
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">04:00</span>
          <span class="highlight-section">Рехаб</span>
          <span class="highlight-location">Москва</span>
          Аудио-терапия
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">05:00</span>
          <span class="highlight-section">Хор</span>
          <span class="highlight-location">Москва</span>
          Поют дети
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">06:00</span>
          <span class="highlight-section">Молния</span>
          <span class="highlight-location">Лондон</span>
          Что почем - крипта и все остальное
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">07:00</span>
          <span class="highlight-section">Огоньки</span>
          <span class="highlight-location">Нью-Йорк</span>
          Спетни под музыку
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">08:00</span>
          <span class="highlight-section">Математика</span>
          <span class="highlight-location">Москва</span>
          Уроки с Сашей
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">09:00</span>
          <span class="highlight-section">Youtube Reupload</span>
          <span class="highlight-location">Нью-Йорк</span>
          Трудная проблема сознания
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">10:00</span>
          <span class="highlight-section">Copy that!</span>
          <span class="highlight-location">Тбилиси</span>
          Евгения Лягушина
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">11:00</span>
          <span class="highlight-section">Ой, как удобно!</span>
          <span class="highlight-location">Амстердам</span>
          Раскрываем характеры с Светой Польской
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">12:00</span>
          <span class="highlight-section">В гостях у голого художника</span>
          <span class="highlight-location">Владимир</span>
          Интервью с Анатолием Беланом
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">13:00</span>
          <span class="highlight-section">Элексир</span>
          <span class="highlight-location">Париж</span>
          Психоролия с Аленой Павловой
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">14:00</span>
          <span class="highlight-section">Лампа Алладина</span>
          <span class="highlight-location">Санкт-Петербург</span>
          Кирилл Акулиничев. Абстракт-Сити
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">15:00</span>
          <span class="highlight-section">Зина</span>
          <span class="highlight-location">Москва</span>
          Новости магазинов
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">16:00</span>
          <span class="highlight-section">Мама мы все тяжело больны</span>
          <span class="highlight-location">Москва</span>
          О насущном с гостем студии
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">17:00</span>
          <span class="highlight-section">Чтобы это ни значило</span>
          <span class="highlight-location">Берлин</span>
          Все про анимацию
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">18:00</span>
          <span class="highlight-section">По ту сторону</span>
          <span class="highlight-location">Ницца</span>
          Рассказы Анны
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">19:00</span>
          <span class="highlight-section">Молния</span>
          <span class="highlight-location">Бали</span>
          Интервью с Умой
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">20:00</span>
          <span class="highlight-section">Шепот</span>
          <span class="highlight-location">Москва</span>
          Невнятный шепот Андрея
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">21:00</span>
          <span class="highlight-section">АСМР</span>
          <span class="highlight-location">Москва</span>
          Асмр-спектакль
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">22:00</span>
          <span class="highlight-section">Струны</span>
          <span class="highlight-location">Москва</span>
          Играет и поет Олег
        </div>
      
    
      
        <div class="schedule-item">
          <span class="highlight-time">23:00</span>
          <span class="highlight-section">Час быка</span>
          <span class="highlight-location">Москва</span>
          Полуночное шоу
        </div>
      
    
  </div>
</div>

    </div>
  </div>
</p>

      <br>
      <!-- Аудио элемент с поддержкой mp3 и m4a -->
<audio id="audio-player" autoplay>
  <source src="/assets/audio//hours/06.mp3" type="audio/mpeg">
  <source src="/assets/audio//hours/06.m4a" type="audio/mp4">
  Ваш браузер не поддерживает воспроизведение аудио.
</audio>

<!-- Кастомный аудио-плеер -->
<div class="custom-audio-player">
  <!-- Кнопка воспроизведения -->
  <button id="play-pause-btn" class="paused"></button>

  <!-- Контейнер для времени -->
  <div class="time-display">
    <span id="current-time">0:00</span>
    <span style="color: white;"> / </span>
    <span id="duration">0:00</span>
  </div>

  <!-- Прогресс-бар -->
  <div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
  </div>
</div>

        <br>
          <br>
            <br>
      <p>
</p>
    </div>
  </main>

  <!-- Футер с информацией -->
  <div class="footer-info">
    <span id="footer-time-wrapper" class="time-container"></span>
    <span class="blinking-text">Слушай Эфир</span>
    <a href="/donations" target="_blank" class="highlight">Донаты</a>
  </div>



</body>
</html>
