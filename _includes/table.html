<script>
document.addEventListener("DOMContentLoaded", () => {
  const scheduleItems = document.querySelectorAll(".schedule-item");
  let currentIndex = 0;

  // Функция для отображения текущего элемента
  function showCurrentItem() {
    // Скрываем все элементы и добавляем класс анимации к текущему элементу
    scheduleItems.forEach((item, index) => {
      if (index === currentIndex) {
        item.style.display = "flex";
        item.classList.add("fade-in");
      } else {
        item.style.display = "none";
        item.classList.remove("fade-in");
      }
    });

    // Переходим к следующему элементу
    currentIndex = (currentIndex + 1) % scheduleItems.length;
  }

  // Запускаем анимацию через каждые 5 секунд
  if (scheduleItems.length > 0) {
    showCurrentItem();
    setInterval(showCurrentItem, 5000);
  }
});
</script>

<!-- Стили для плавной смены -->
<style>
.schedule-item {
  display: none;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.schedule-item.fade-in {
  opacity: 1;
}
</style>

<!-- Список расписания -->
<div class="rotating-text-container">
  <ul class="schedule-list">
    {% assign current_time = site.time | date: "%H:%M" %}
    {% for page in site.hours %}
      {% if page.layout == "hour" and page.start_time > current_time %}
        <li class="schedule-item">
          <span class="highlight-time">Далее</span>
          <span class="highlight-time">{{ page.start_time }}</span>
          <span class="highlight-section">{{ page.section }}</span>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</div>
